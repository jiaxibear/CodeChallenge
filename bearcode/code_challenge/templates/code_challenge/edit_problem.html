{% extends "code_challenge/base.html" %}

{% block title %}Edit Problem{% endblock %}

{% block mainbody %}
<style>
    table{
      margin-left: auto;
      margin-right: auto;
      width: 100%;
      border-top: 1px solid lightgrey;
    }
    tr {
        border-bottom: 1px solid lightgrey;
    }
    td, th {
        padding: 5px;
        font-size: 18px;
        font-weight: normal;
    }
    td.plabel {
        text-align: left;
        width: 15%;
    }
    td.pcontent {
        text-align: left;
        width: 85%;
    }
    #java_default,#python_default,#java_tests,#python_tests {
        display: block;
        margin: auto;
        width: 100%;
        height: 200px;
        border: 1px solid #888;
    }

</style>
<script src="/static/ace-builds/src-noconflict/ace.js" type="text/javascript"
        charset="utf-8"></script>
<script src="/static/js/jquery-2.1.4.min.js" type="text/javascript"></script>

<script>
$(document).ready(function() {
    var java_default = ace.edit("java_default");
    var java_tests = ace.edit("java_tests");
    var python_default = ace.edit("python_default");
    var python_tests = ace.edit("python_tests");

    java_default.setTheme("ace/theme/default");
    java_tests.setTheme("ace/theme/default");
    python_default.setTheme("ace/theme/default");
    python_tests.setTheme("ace/theme/default");

    java_default.getSession().setMode("ace/mode/java");
    java_tests.getSession().setMode("ace/mode/java");
    python_default.getSession().setMode("ace/mode/python");
    python_tests.getSession().setMode("ace/mode/python");

    $("form").submit(function(){
        //alert(java_default.getValue());
        $("#java_default").append("<textarea id='id_java_default' name='java_default'>"+java_default.getValue()+"</textarea>");
        //alert(java_tests.getValue());
        $("#python_default").append("<textarea id='id_python_default' name='python_default'>"+python_default.getValue()+"</textarea>");
        //alert(python_default.getValue());
        $("#java_tests").append("<textarea id='id_java_tests' name='java_tests'>"+java_tests.getValue()+"</textarea>");
        //alert(python_tests.getValue());
        $("#python_tests").append("<textarea id='id_python_tests' name='python_tests'>"+python_tests.getValue()+"</textarea>");
    });
});

</script>
    <div class="container" align="center">

            <div class="container">
              <!-- Example row of columns -->
              <div class="row">

                <div class="col-md-10">
                    <h1>Edit Problem</h1>
                  <br><br>

                  <form method="post" action="{% url 'editproblem' problem.id %}">
                    <table align="center">
                    <tr>
                      <td class="plabel"><label for="id_name">Name:</label></td>
                      <td class="pcontent">
                          <input id="id_name" class="form-control" maxlength="50" name="name" type="text" value="{{problem.name}}" />
                      </td>
                      <td style="color: red"></td>
                    </tr>

                    <tr>
                      <td class="plabel"><label for="id_description">Description:</label></td>
                      <td class="pcontent">
                          <textarea cols="40" id="id_description" rows="3" class="form-control" maxlength="420" name="description" rows="10">{{problem.description}}</textarea>
                      </td>
                      <td style="color: red"></td>
                    </tr>

                    <tr>
                      <td class="plabel"><label for="id_example">Example:</label></td>
                      <td class="pcontent">
                          <textarea cols="40" id="id_example" rows="3" class="form-control" maxlength="420" name="example" rows="10">{{problem.example}}</textarea>
                      </td>
                      <td style="color: red"></td>
                    </tr>
                    <!--<tr>-->
                        <!--<td><label for="id_difficulty">Difficulty:</label></td>-->
                        <!--<td>-->
                            <!--<select id="id_difficulty" name="difficulty" class="form-control">-->
                                <!--<option value="1">Easy</option>-->
                                <!--<option value="2">Medium</option>-->
                                <!--<option value="3">Hard</option>-->
                            <!--</select>-->
                        <!--</td>-->
                        <!--<td style="color: red"></td>-->
                    <!--</tr>-->

                        <!--<tr>-->
                            <!--<td></td>-->
                            <!--<td>-->
                    <!--{% for field in form.visible_fields %}-->

                        <!--"{{field.label_tag}}",-->

                    <!--{% endfor %}-->
                            <!--</td>-->
                            <!--<td></td>-->
                        <!--</tr>-->
                    {% for field in form.visible_fields %}
                        {% if field.label_tag == "Difficulty:" %}
                    <tr>
                        <td>{{field.label_tag}}</td>
                        <td>{{field}}</td>
                        <td style="color: red">{{field.errors}}</td>
                    </tr>
                        {% endif %}
                    {% endfor %}


                    <tr>
                        <td><label for="id_category">Category:</label></td>
                        <td>
                            <select id="id_category" name="category" class="form-control">
                                <option value="General">General</option>
                                <option value="Array">Array</option>
                                <option value="String">String</option>
                                <option value="Dynamic Programing">Dynamic Programing</option>
                                <option value="Greedy">Greedy</option>
                                <option value="Sort">Sort</option>
                                <option value="Math">Math</option>
                                <option value="Stack">Stack</option>
                                <option value="Heap">Heap</option>
                            </select>
                        </td>
                        <td style="color: red"></td>
                    </tr>
                    <tr>
                      <td class="plabel"><label>Java default:</label></td>
                      <td class="pcontent">
                          <div id="java_default">{{problem.java_default}}</div>
                      </td>
                      <td style="color: red"></td>
                    </tr>

                    <tr>
                      <td class="plabel"><label>Python default:</label></td>
                      <td class="pcontent">
                          <div id="python_default">{{problem.python_default}}</div>
                      </td>
                      <td style="color: red"></td>
                    </tr>

                    <tr>
                      <td class="plabel"><label for="id_tle_limit">Tle limit:</label></td>
                      <td class="pcontent"><input id="id_tle_limit" class="form-control" min="0" name="tle_limit" type="number" value="1" /></td>
                      <td style="color: red"></td>
                    </tr>

                    <tr>
                      <td class="plabel"><label for="id_mle_limit">Mle limit:</label></td>
                      <td class="pcontent"><input id="id_mle_limit" class="form-control" min="0" name="mle_limit" type="number" value="500" /></td>
                      <td style="color: red"></td>
                    </tr>

                    <tr>
                      <td class="plabel"><label>Java tests:</label></td>
                      <td class="pcontent">
                          <div id="java_tests">{{problem.java_tests}}</div>
                      </td>
                      <td style="color: red"></td>
                    </tr>

                    <tr>
                      <td class="plabel"><label>Python tests:</label></td>
                      <td class="pcontent">
                          <div id="python_tests">{{problem.python_tests}}</div>
                      </td>
                      <td style="color: red"></td>
                    </tr>
                    </table>
                    <!--<table>-->
                        <!--{% for field in form.visible_fields %}-->
                        <!--<tr>-->
                            <!--<td>{{field.label_tag}}</td>-->
                            <!--<td>{{field}}</td>-->
                            <!--<td style="color: red">{{field.errors}}</td>-->
                        <!--</tr>-->
                        <!--{% endfor %}-->
                        <!--<tr>-->
                            <!--<td></td>-->
                            <!--<td id="button">-->
                                <!--<input type="submit" class="btn btn-lg btn-default" value="Register" />-->
                            <!--</td>-->
                        <!--</tr>-->
                    <!--</table>-->
                    {% for field in form.hidden_fields %}
                      {{field}}
                    {% endfor %}
                    {% csrf_token %}
                    <a class="btn btn-default" href="{% url 'manageproblem' %}">Cancel</a>
                    <input class="btn btn-success" type="submit" value="Confirm Modify" />
                  </form>
                </div>
            </div>
        </div>
    </div>
{% endblock %}